function JSTestFrame(e){this.obj=e,this.not=!1,this.and=this.should}function thenThe(e){for(var t=0;t<JSTestFrame.handlers.length;t++){var n=JSTestFrame.handlers[t](e);if(n)return new JSTestFrame(n)}throw new Error("No suitable handler for "+e)}function haveClass(){var e=arguments;return function(t){for(var n=0;n<e.length;n++){var r=e[n];this.ok(t.eq(n).hasClass(r),"The element "+t.selector+" should be have the right class but had `"+t.eq(n)[0].className+"`")}}}function notHaveClass(e){return function(t){this.ok(!t.hasClass(e),"The element "+t.selector+" should NOT have class `"+e+"`")}}function haveText(){var e=arguments;return function(t){for(var n=0;n<e.length;n++){var r=e[n];this.equal(t.eq(n).html(),r,"The element "+t.selector+" should be have the right text")}}}function containText(e){return function(t){var n=t.html();this.ok(n.indexOf(e)>-1,"The element "+t.selector+" should contain text `"+e+"` but was `"+n+"`")}}function beThere(e){this.ok(e.length!==0,"The element "+e.selector+" should be there")}function linkTo(e){return function(t){var n=t.attr("href")||t.attr("src");this.equal(n,e,"The link should be correct")}}function haveSize(e){return function(t){this.equal(t.length,e,"Expected "+t.selector+" to find "+e+" elements")}}function haveValue(e){return function(t){this.equal(t.val(),e,"Expected "+t.selector+" to have value `"+e+"`")}}function inElement(e){return function(t){return t.find(e)}}function theUserClicksOn(e){jQuery(e).trigger("click")}function calledTimes(e){return function(t){this.equal(t.callCount,e,"The function  should have been called the right number of times"),t.previousCallCount=t.callCount}}function calledAgain(e){var t=e.previousCallCount||0;this.ok(e.callCount>t,"The function should have been called again (more than "+t+" times)"),e.previousCallCount=e.callCount}function calledWith(){var e=arguments;return function(t){this.ok(t.called,"The fn should have been called");for(var n=0;n<e.length;n++)this.equal(t.getCall(t.callCount-1).args[n],e[n],"The last call's argument at ["+n+"] should be correct");t.previousCallCount=t.callCount}}JSTestFrame.prototype.shouldHaveBeen=JSTestFrame.prototype.should=function(e,t){return t=t||JSTestFrame.DO_NOTHING,this.not=!1,this.and=this.should,e.call(this,t(this.obj)),this},JSTestFrame.prototype.shouldNotHaveBeen=JSTestFrame.prototype.shouldNot=function(e,t){return t=t||JSTestFrame.DO_NOTHING,this.not=!0,this.and=this.shouldNot,e.call(this,t(this.obj)),this},JSTestFrame.prototype.ok=function(e,t){this.not?window.ok.call(window,!e,"NOT "+t):window.ok.call(window,e,t)},JSTestFrame.prototype.equal=function(e,t,n){this.not?window.notEqual.call(window,e,t,"NOT "+n):window.equal.call(window,e,t,n)},JSTestFrame.DO_NOTHING=function(e){return e},JSTestFrame.handlers=[],JSTestFrame.addHandler=function(e){JSTestFrame.handlers.push(e)};var given=when=function(e){return e},beVisible=notHaveClass("hidden"),beHidden=haveClass("hidden");JSTestFrame.jquery={createAssertable:function(e,t){return function(){var n=arguments[0],r=Array.prototype.slice.call(arguments,1);return function(i){var s;if(r.length)for(var o=0;o<r.length;o++)s=t(i.eq(o),n),this.equal(s,r[o],"The element "+i.eq(o).selector+" should have "+e+" `"+n+"`:`"+r[o]+"`");else s=t(i,n),this.ok(typeof s!="undefined"&&s!==!1,"The element "+i.selector+" should have "+e+" `"+n+"`")}}}},window.haveStyle=JSTestFrame.jquery.createAssertable("style",function(e,t){return e.css(t)}),window.haveAttribute=JSTestFrame.jquery.createAssertable("attribute",function(e,t){return e.attr(t)}),JSTestFrame.addHandler(function(e){if(e.jquery)return jQuery(e)});var notCalled=calledTimes(0),calledOnce=calledTimes(1),calledTwice=calledTimes(2);JSTestFrame.addHandler(function(e){if(typeof e=="function"&&e.callCount!==undefined)return e});