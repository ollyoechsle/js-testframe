function JSTestFrame(e){this.obj=e,this.not=!1}function thenThe(e){for(var t=0;t<JSTestFrame.handlers.length;t++){var n=JSTestFrame.handlers[t](e);if(n)return new JSTestFrame(n)}throw new Error("No suitable handler for "+e)}function haveClass(e){return function(t){this.ok(t.hasClass(e),"The element "+t.selector+" should have class `"+e+"`")}}function notHaveClass(e){return function(t){this.ok(!t.hasClass(e),"The element "+t.selector+" should NOT have class `"+e+"`")}}function haveText(){var e=arguments;return function(t){for(var n=0;n<e.length;n++){var r=e[n];this.equal(t.eq(n).html(),r,"The element "+t.selector+" should be have the right text")}}}function containText(e){return function(t){var n=t.html();this.ok(n.indexOf(e)>-1,"The element "+t.selector+" should contain text `"+e+"` but was `"+n+"`")}}function beThere(e){this.ok(e.length!==0,"The element "+e.selector+" should be there")}function linkTo(e){return function(t){var n=t.attr("href")||t.attr("src");this.equal(n,e,"The link should be correct")}}function haveSize(e){return function(t){this.equal(t.length,e,"Expected "+t.selector+" to find "+e+" elements")}}function haveValue(e){return function(t){this.equal(t.val(),e,"Expected "+t.selector+" to have value `"+e+"`")}}function haveAttribute(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return function(n){if(t.length)for(var r=0;r<t.length;r++)this.equal(n.eq(r).attr(e),t[r],"The element "+n.eq(r).selector+" should have attribute `"+e+"`=`"+t[r]+"`");else{var i=n.attr(e);this.ok(typeof i!="undefined"&&i!==!1,"The element "+n.selector+" should have attribute `"+e+"`")}}}function haveStyle(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return function(n){if(t.length)for(var r=0;r<t.length;r++)this.equal(n.eq(r).css(e),t[r],"The element "+n.eq(r).selector+" should have style `"+e+"`:`"+t[r]+"`");else{var i=n.css(e);this.ok(typeof i!="undefined"&&i!==!1,"The element "+n.selector+" should have attribute `"+e+"`")}}}function inElement(e){return function(t){return t.find(e)}}function calledTimes(e){return function(t){this.equal(t.callCount,e,"The function  should have been called the right number of times"),t.previousCallCount=t.callCount}}function calledAgain(e){var t=e.previousCallCount||0;this.ok(e.callCount>t,"The function should have been called again (more than "+t+" times)"),e.previousCallCount=e.callCount}JSTestFrame.prototype.shouldHaveBeen=JSTestFrame.prototype.should=function(e,t){return t=t||JSTestFrame.DO_NOTHING,this.not=!1,e.call(this,t(this.obj)),this},JSTestFrame.prototype.shouldNotHaveBeen=JSTestFrame.prototype.shouldNot=function(e,t){return t=t||JSTestFrame.DO_NOTHING,this.not=!0,e.call(this,t(this.obj)),this},JSTestFrame.prototype.ok=function(e,t){this.not?window.ok.call(window,!e,"NOT "+t):window.ok.call(window,e,t)},JSTestFrame.prototype.equal=function(e,t,n){this.not?window.notEqual.call(window,e,t,"NOT "+n):window.equal.call(window,e,t,n)},JSTestFrame.DO_NOTHING=function(e){return e},JSTestFrame.handlers=[],JSTestFrame.addHandler=function(e){JSTestFrame.handlers.push(e)};var given=when=function(e){return e},beVisible=notHaveClass("hidden"),beHidden=haveClass("hidden");JSTestFrame.addHandler(function(e){if(e.jquery)return jQuery(e)});var notCalled=calledTimes(0),calledOnce=calledTimes(1),calledTwice=calledTimes(2);JSTestFrame.addHandler(function(e){if(typeof e=="function"&&e.callCount!==undefined)return e});